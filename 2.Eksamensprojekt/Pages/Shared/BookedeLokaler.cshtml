@page
@using SuperBookerData
@model _2.Eksamensprojekt.Pages.Shared.BookedeLokalerModel
@{
    ViewData["Title"] = "Alle Bookinger";
}

@foreach (var lokale in Model.BookingData)
{
<div class="row">
    <div class="lokale-info-centreret">
        <div class="card mb-2">
            <div class="card-header p-2">
                <h2 class="card-title">@lokale.Lokale.LokaleNummer @lokale.Lokale.LokaleNavn</h2>
                <h2>
                    @if (lokale.Lokale.LokaleSmartBoard == true)
                    {
                        @("(M. SmartBoard)")
                    }
                    @if (lokale.Lokale.LokaleSmartBoard == false)
                    {
                        @("(U. SmartBoard)")
                    }
                </h2>
            </div>
            <div class="card-body">
                <p class="card-text"><b>Størrelse:</b> @lokale.Lokale.LokaleSize</p>
                <p class="card-text"><b>Antal pladser tilbage:</b> @lokale.Lokale.MuligeBookinger</p>
                <p class="card-text"><b>Date:</b> @lokale.Dag.ToString("d")</p>
                <p class="card-text"><b>Tidspunkt: </b>@lokale.TidSlut.ToString(@"hh\:mm")</p>
                <p class="card-text"><b>Varighed: </b>@lokale.TidStart.ToString(@"hh\:mm")</p>
                <p class="card-text"><b>Booket af:</b> @lokale.Bruger.BrugerNavn</p>
                <p class="card-text"><b>Booket for: </b>@Enum.GetName(typeof(brugerRolle), (lokale.BookesFor))</p>
                <form method="post">
                    @foreach (var test in User.Claims)
                    {
                        if (test.Type == "http://schemas.microsoft.com/ws/2008/06/identity/claims/role")
                        {
                            if (test.Value == "Administration")
                            {
                                <div class="centrer-item">
                                    <button class="btn btn-primary black-button" type="submit" asp-page="/AdministrationPages/AdministrationAflysBooking" asp-route-id="@lokale.ResevertionId">AFLYS</button>
                                </div>
                            }
                            if (test.Value == "Underviser")
                            {
                                if (lokale.brugerRolle == brugerRolle.Underviser || lokale.brugerRolle == brugerRolle.Student)
                                {
                                    <div class="centrer-item">
                                        <button class="btn btn-primary black-button" type="submit" asp-page="/UnderviserPages/UnderviserAflysBooking" asp-route-id="@lokale.ResevertionId">AFLYS</button>
                                    </div>
                                }
                            }
                            if (test.Value == "Student")
                            {
                                <div class="centrer-item">
                                    <button class="btn btn-primary black-button" type="submit" asp-page="/StuderendePages/StuderendeAflysBooking" asp-route-id="@lokale.ResevertionId">AFLYS</button>
                                </div>
                            }
                        }
                     }
                </form>
            </div>
        </div>
    </div>
</div>
}

@section Scripts
{
    <script>
        $(document).ready(function () {
            $("#myModal").Modal({ backdrop: "static" });
            $("#myModal").Modal('show');
        });
    </script>
}
