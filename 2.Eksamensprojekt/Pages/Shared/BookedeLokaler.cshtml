@page
@using SuperBookerData
@model _2.Eksamensprojekt.Pages.Shared.BookedeLokalerModel
@{
    ViewData["Title"] = "Detailed View";
}

@foreach (var lokale in Model.BookingData)
{
    <div class="card mb-2" style="width: 20rem;">
        <div class="card-header p-2">
            <h5 class="card-title">@lokale.Lokale.LokaleNummer @lokale.Lokale.LokaleNavn</h5>
            <h5>
                @if (lokale.Lokale.LokaleSmartBoard == true)
                {
                    @("(M. SmartBoard)")
                }
                @if (lokale.Lokale.LokaleSmartBoard == false)
                {
                    @("(U. SmartBoard)")
                }
            </h5>
            <h5 class="Lokale-Størrelse:"><b>Størrelse:</b> @lokale.Lokale.LokaleSize</h5>
            <h5 class="card-title"><b>Antal pladser tilbage:</b> @lokale.Lokale.MuligeBookinger</h5>
            <h5 class="card-title"><b>Date:</b> @lokale.Dag.ToString("d")</h5>
            <h5 class=""><b>Tidspunkt:</b> @lokale.TidStart.ToString(@"hh\:mm") - @lokale.TidSlut.ToString(@"hh\:mm")</h5>
            <h5 class=""><b>Bookede af:</b> @lokale.Bruger.BrugerNavn</h5>
            <form method="get">
                @foreach (var test in User.Claims)
                {
                    if (test.Type == "http://schemas.microsoft.com/ws/2008/06/identity/claims/role")
                    {
                        if (test.Value == "Administration")
                        {
                            <button type="submit" asp-page="/AdministrationPages/AdministrationAflysBooking" asp-route-id="@lokale.ResevertionId"><i class="fa fa-trash"></i></button>
                        }
                        if (test.Value == "Underviser")
                        {
                            if (lokale.brugerRolle == brugerRolle.Underviser || lokale.brugerRolle == brugerRolle.Student)
                            {
                                <button type="submit" asp-page="/UnderviserPages/UnderviserAflysBooking" asp-route-id="@lokale.ResevertionId"><i class="fa fa-trash"></i></button>
                            }
                        }
                        if (test.Value == "Student")
                        {
                            <button type="submit" asp-page="/StuderendePages/StuderendeAflysBooking" asp-route-id="@lokale.ResevertionId"><i class="fa fa-trash"></i></button>
                        }
                    }
                }


            </form>
        </div>
    </div>
}

@section Scripts
{
    <script>
        $(document).ready(function () {
            $("#myModal").Modal({ backdrop: "static" });
            $("#myModal").Modal('show');
        });
    </script>
}
